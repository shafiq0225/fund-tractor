<div class="bg-white rounded-2xl shadow-lg border overflow-hidden">
  <table class="table-fixed w-full border-collapse">
    <thead class="bg-slate-700 text-slate-100 text-sm uppercase tracking-wide">
      <tr>
        <th class="text-left px-6 py-4 w-1/3 border-b border-indigo-200">
          <div class="flex items-center gap-2">
            <mat-icon class="text-indigo-500 text-base">description</mat-icon>
            Scheme Name
          </div>
        </th>
        <th class="text-left px-6 py-4 w-1/4 border-b border-indigo-200">
          <div class="flex items-center gap-2">
            <mat-icon class="text-blue-500 text-base">event</mat-icon>
            Created Date
          </div>
        </th>
        <th class="text-left px-6 py-4 w-1/4 border-b border-indigo-200">
          <div class="flex items-center gap-2">
            <mat-icon class="text-green-500 text-base">update</mat-icon>
            Last Updated
          </div>
        </th>
        <th class="text-left px-6 py-4 w-1/4 border-b border-indigo-200">
          <div class="flex items-center gap-2">
            <mat-icon class="text-purple-500 text-base">verified_user</mat-icon>
            Approved By
          </div>
        </th>
        <th class="text-left px-6 py-4 w-1/6 border-b border-indigo-200">
          <div class="flex items-center gap-2">
            <mat-icon class="text-teal-500 text-base">toggle_on</mat-icon>
            Status
          </div>
        </th>
        <th class="text-left px-6 py-4 w-1/6 border-b border-indigo-200">
          <div class="flex items-center gap-2">
            <mat-icon class="text-pink-500 text-base">settings</mat-icon>
            Action
          </div>
        </th>
      </tr>
    </thead>

    <tbody class="text-sm text-gray-700">
      <!-- Empty state row -->
      <tr *ngIf="schemes.length === 0">
        <td colspan="6" class="px-6 py-10 text-center text-gray-500">
          <mat-icon class="text-gray-400 text-4xl mb-2">info</mat-icon>
          <div>No schemes available.</div>
        </td>
      </tr>

      <tr *ngFor="let scheme of schemes" class="border-t hover:bg-indigo-50 transition-colors">

        <!-- Scheme Name -->
        <td class="px-6 py-4 font-medium text-gray-900">{{ scheme.schemeName }}</td>

        <!-- Created Date -->
        <td class="px-6 py-4 font-medium text-gray-900"> {{ scheme.createdAt | date:'dd-MMM-yyyy' }}</td>

        <!-- Last Updated -->
        <td class="px-6 py-4 font-medium text-gray-900">{{ scheme.lastUpdatedDate | date:'dd-MMM-yyyy' }}</td>

        <!-- Approved By -->
        <td class="px-6 py-4 font-medium text-gray-900">{{ scheme.approvedName }}</td>

        <!-- Status -->
        <td class="px-6 py-4">
          <span class="px-3 py-1 rounded-full text-xs font-medium" [ngClass]="scheme.isApproved
              ? 'bg-green-100 text-green-700 border border-green-300'
              : 'bg-red-100 text-red-700 border border-red-300'">
            {{ scheme.isApproved ? 'Active' : 'Inactive' }}
          </span>
        </td>

        <!-- Toggle with Tooltip -->
        <td class="px-6 py-4">
          <button type="button" (click)="onToggle(scheme)" [disabled]="scheme.isUpdating"
            matTooltip="{{ scheme.isApproved ? 'Click to deactivate' : 'Click to activate' }}"
            class="relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-300 focus:outline-none shadow"
            [ngClass]="scheme.isApproved ? 'bg-indigo-600' : 'bg-gray-300'">

            <!-- Spinner overlay if updating -->
            <div *ngIf="scheme.isUpdating" class="absolute inset-0 flex items-center justify-center">
              <mat-progress-spinner diameter="18" mode="indeterminate" color="accent">
              </mat-progress-spinner>
            </div>

            <!-- Normal toggle circle -->
            <span class="inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-300 shadow"
              [ngClass]="scheme.isApproved ? 'translate-x-6' : 'translate-x-1'">
            </span>
          </button>
        </td>


      </tr>
    </tbody>
  </table>
</div>