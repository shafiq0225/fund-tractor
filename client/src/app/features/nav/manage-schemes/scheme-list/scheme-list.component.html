<div class="space-y-6">
  <ng-container *ngFor="let fund of getFunds()">
    <!-- Fund Card -->
    <div class="bg-gray-50 rounded-2xl shadow-sm border border-gray-200 overflow-hidden">

      <!-- Fund Header -->
      <div class="flex justify-between items-center px-6 py-3 bg-gray-100 border-b border-gray-200">
        <h3 class="text-lg font-semibold text-gray-800">{{ fund }}</h3>
        <button type="button" (click)="onFundUpdateClick(fund)" [disabled]="isFundUpdating(fund)"
          class="flex items-center gap-2 px-4 py-1 rounded-lg transition-colors duration-500 ease-in-out shadow"
          [ngClass]="isFundActive(fund) ? 'bg-red-600 hover:bg-red-700 text-white' : 'bg-green-600 hover:bg-green-700 text-white'">

          <!-- Animated icon -->
          <mat-icon class="transition-transform duration-500 ease-in-out"
            [ngClass]="isFundActive(fund) ? 'rotate-180' : 'rotate-0'">
            verified
          </mat-icon>

          <!-- Animated text -->
          <span class="transition-all duration-500 ease-in-out">
            {{ isFundActive(fund) ? 'Deactivate All' : 'Approve All' }}
          </span>
        </button>

      </div>

      <!-- Scheme Table -->
      <div class="overflow-x-auto">
        <table class="min-w-full table-auto divide-y divide-gray-200">
          <thead class="bg-gray-200 text-gray-700 text-sm uppercase tracking-wide">
            <tr>
              <th class="px-6 py-3 text-left">Scheme Name</th>
              <th class="px-6 py-3 text-left">Created Date</th>
              <th class="px-6 py-3 text-left">Last Updated</th>
              <th class="px-6 py-3 text-left">Approved By</th>
              <th class="px-6 py-3 text-left">Status</th>
              <th class="px-6 py-3 text-left">Action</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <tr *ngFor="let scheme of getSchemesByFund(fund)" class="hover:bg-indigo-50 transition-colors">
              <td class="px-6 py-3 font-medium text-gray-900">{{ scheme.schemeName }}</td>
              <td class="px-6 py-3 text-gray-700">{{ scheme.createdAt | date:'dd-MMM-yyyy' }}</td>
              <td class="px-6 py-3 text-gray-700">{{ scheme.lastUpdatedDate | date:'dd-MMM-yyyy' }}</td>
              <td class="px-6 py-3 text-gray-700">{{ scheme.approvedName }}</td>
              <td class="px-6 py-3">
                <span class="px-3 py-1 rounded-full text-xs font-semibold" [ngClass]="scheme.isApproved
                        ? 'bg-green-100 text-green-800 border border-green-300'
                        : 'bg-red-100 text-red-800 border border-red-300'">
                  {{ scheme.isApproved ? 'Active' : 'Inactive' }}
                </span>
              </td>
              <td class="px-6 py-3">
                <!-- Scheme toggle -->
                <!-- Scheme toggle -->
                <button type="button" (click)="onToggle(scheme)" [disabled]="scheme.isUpdating"
                  class="relative inline-flex h-6 w-12 items-center rounded-full transition-colors duration-300 shadow focus:outline-none"
                  [ngClass]="scheme.isApproved ? 'bg-indigo-600' : 'bg-gray-300'">

                  <!-- Toggle circle with smooth transform -->
                  <span class="inline-block h-5 w-5 transform rounded-full bg-white shadow
               transition-transform duration-500 ease-in-out"
                    [ngClass]="scheme.isApproved ? 'translate-x-6' : 'translate-x-1'">
                  </span>

                  <!-- Spinner overlay while updating -->
                  <mat-progress-spinner *ngIf="scheme.isUpdating" diameter="16" mode="indeterminate" color="accent"
                    class="absolute inset-0 m-auto">
                  </mat-progress-spinner>
                </button>

              </td>
            </tr>
            <!-- Empty state -->
            <tr *ngIf="getSchemesByFund(fund).length === 0">
              <td colspan="6" class="px-6 py-10 text-center text-gray-400">
                <mat-icon class="text-gray-300 text-4xl mb-2">info</mat-icon>
                <div>No schemes available for this fund.</div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </ng-container>
</div>