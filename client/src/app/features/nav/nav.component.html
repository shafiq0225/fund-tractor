<div class="w-full max-w-xl mx-auto p-8 bg-white rounded-2xl shadow-lg">
    <!-- Header -->
    <h2 class="text-2xl font-bold mb-2 text-gray-800">Import AMFI</h2>
    <p class="text-gray-500 mb-6">
        Upload a <span class="font-medium">.txt</span> or <span class="font-medium">.xlsx</span> file
        to import AMFI data into your app.
    </p>

    <!-- Drop zone -->
    <div class="border-2 border-dashed rounded-xl p-10 text-center cursor-pointer transition-all duration-200 ease-in-out"
        [ngClass]="{
      'border-blue-500 bg-blue-50': isDragging,
      'border-gray-300 hover:border-blue-400 hover:bg-gray-50': !isDragging
    }" (click)="fileInput.click()" (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)"
        (drop)="onDrop($event)">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-gray-400 mb-4" fill="none"
            viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
        </svg>
        <p class="text-gray-700 font-medium">Drag & Drop file here</p>
        <p class="text-gray-400 text-sm">(Or click to browse, 4MB max)</p>
    </div>

    <!-- Hidden file input -->
    <input #fileInput type="file" class="hidden" (change)="onFileSelected($event)" accept=".txt,.xls,.xlsx,.csv" />

    <!-- OR Divider -->
    <div class="flex items-center my-6">
        <div class="flex-grow border-t border-gray-200"></div>
        <span class="px-3 text-gray-400 text-sm">OR</span>
        <div class="flex-grow border-t border-gray-200"></div>
    </div>

    <!-- URL upload section -->
    <div class="mb-6">
        <p class="text-gray-700 mb-2 font-medium">Upload from URL</p>
        <div class="flex">
            <input type="text" [(ngModel)]="fileUrl" placeholder="http://www.example.com/file/..."
                class="flex-grow border border-gray-300 rounded-l-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400" />
            <button
                class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-r-lg text-sm font-medium transition-colors"
                (click)="uploadFromUrl()">
                Upload
            </button>
        </div>
    </div>

    <!-- Uploaded file preview -->
    <div *ngIf="uploadedFile"
        class="mb-6 flex items-center justify-between p-4 rounded-lg border border-gray-200 bg-gray-50">
        <div class="flex items-center space-x-3">
            <mat-icon class="text-blue-500">description</mat-icon>
            <div>
                <p class="text-sm font-medium text-gray-800">{{ uploadedFile.name }}</p>
                <p class="text-xs text-gray-500">
                    {{ (uploadedFile.size / 1024 | number : '1.0-0') }} KB
                </p>
            </div>
        </div>
        <button mat-icon-button color="warn" (click)="deleteFile()">
            <mat-icon>delete</mat-icon>
        </button>
    </div>


    <!-- Progress bar -->
    <div *ngIf="uploading && uploadProgress < 100" class="mb-6">
        <div class="flex justify-between items-center mb-1">
            <span class="text-sm text-gray-600">{{ uploadedFile?.name }}</span>
            <span class="text-sm text-blue-500 font-medium">{{ uploadProgress }}%</span>
        </div>
        <mat-progress-bar mode="determinate" [value]="uploadProgress" color="primary"
            class="rounded-full h-2"></mat-progress-bar>
    </div>


    <!-- Buttons -->
    <div class="flex justify-end space-x-3 pt-4 border-t border-gray-100">
        <button class="text-gray-600 font-medium px-4 py-2 hover:text-gray-800 transition-colors" (click)="discard()"
            [disabled]="!uploading">
            Discard
        </button>
        <button
            class="bg-blue-500 hover:bg-blue-600 text-white px-5 py-2 rounded-md text-sm font-medium transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed"
            [disabled]="uploadProgress < 100" (click)="importFile()">
            Import
        </button>

    </div>
</div>